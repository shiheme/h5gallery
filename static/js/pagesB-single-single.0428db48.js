(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pagesB-single-single"],{"118b":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var n={beePage:a("ecdc").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("bee-page",{ref:"beePage",staticClass:"wrapper page-single",class:{light:"light"===e.theme,dark:"dark"===e.theme,sym:"sym"===e.theme},attrs:{"data-bee-theme":e.theme}},[a("v-uni-view",{staticClass:"bee-page",staticStyle:{width:"100%",height:"100%",position:"relative"}},[a("scale-gesture-handler",{staticClass:"isfull",attrs:{"on-gesture-event":"onScale"}},[a("bee-single-home",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"single-home",postid:e.id,posttype:e.posttype,newindex:e.previewindex,thread:e.categories},on:{indexChange:function(t){arguments[0]=t=e.$handleEvent(t),e.indexChange.apply(void 0,arguments)}}})],1)],1)],1)},r=[]},"35f9":function(e,t,a){"use strict";a.r(t);var n=a("118b"),i=a("bf6c");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);var s=a("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"ee79773e",null,!1,n["a"],void 0);t["default"]=u.exports},"3ed3":function(e,t,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("5530"));a("a9e3"),a("99af"),a("caad");var r=n(a("9f89")),s=n(a("1c02")),u=a("26cb"),o={OPACITY:1,TRANSLATE_Y:0,TRANSLATE_X:0,SCALE:1,MIN_SCALE:1,START_Y:0},l=uni.getSystemInfoSync().windowHeight;function d(e,t,a){return Math.min(a,Math.max(t,e))}var c=null,f={components:{beeSingleHome:s.default,scaleGestureHandler:r.default},props:{posttype:{type:String,default:""},id:{type:Number,default:0}},data:function(){return{previewindex:0}},computed:(0,i.default)((0,i.default)({},(0,u.mapState)({categories:function(e){return e.categories.categories}})),{},{userId:function(){return this.$store.getters["session/get"]("userId")},userInfo:function(){var e=this.$store.getters["jv/get"]("user/user");return e}}),watch:{},mounted:function(e){},onLoad:function(e){o.OPACITY=uni.worklet.shared(1),o.TRANSLATE_X=uni.worklet.shared(0),o.TRANSLATE_Y=uni.worklet.shared(0),o.SCALE=uni.worklet.shared(1),o.MIN_SCALE=uni.worklet.shared(1),o.START_Y=uni.worklet.shared(0);var t=getCurrentPages(),a=t[t.length-1];c=uni.router.getRouteContext(a)},onReady:function(){this.$scope.applyAnimatedStyle("#single-home >>> .single-list >>> .single-image",(function(){return{transform:"translate(".concat(o.TRANSLATE_X.value,"px, ").concat(o.TRANSLATE_Y.value,"px) scale(").concat(o.SCALE.value,")")}}))},onHide:function(){},onUnload:function(){this.$store.dispatch("beebeeo/setError",{loading:!1})},methods:{indexChange:function(e){this.previewindex=e},onScale:function(e){if([1].includes(e.state));else if([2].includes(e.state)){e.focalX;var t=e.focalY,a=e.focalDeltaX,n=e.focalDeltaY,i=t-o.START_Y.value;if(o.TRANSLATE_X.value+=a,o.TRANSLATE_Y.value<0){var r=.52*Math.pow(1-Math.min(i/l,1),2),s=o.TRANSLATE_Y.value+Math.ceil(n*r);o.TRANSLATE_Y.value=s}else o.TRANSLATE_Y.value+=n;o.OPACITY.value=function(e,t){var a=e/(t/2);return d(Math.pow(1-a,3),0,1)}(i,l);var u=function(e,t){var a=e/(t/3*2);return d(1-.4*a,.6,1)}(i,l);o.SCALE.value=u,o.MIN_SCALE.value=Math.min(u,o.MIN_SCALE.value)}else if([3,4].includes(e.state)){var f=c,h=f.didPop,g=o.TRANSLATE_Y.value,v=o.SCALE.value,p=o.MIN_SCALE.value;g>1&&v<=p+.01?h():(o.OPACITY.value=uni.worklet.timing(1),o.TRANSLATE_X.value=uni.worklet.timing(0),o.TRANSLATE_Y.value=uni.worklet.timing(0),o.SCALE.value=uni.worklet.timing(1),o.MIN_SCALE.value=1)}},onShareAppMessage:function(e){var t=this.userId?this.userInfo.user.nickName:"好友";return"button"===e.from&&e.target?{title:e.target.dataset.sharetitle,path:"/pages/index/index?gotourl=1&isshare=1&id="+e.target.dataset.shareid+"&shareuser="+t,imageUrl:e.target.dataset.shareimg}:{title:this.categories.tolib[this.previewindex].title.rendered,path:"/pages/index/index?gotourl=1&isshare=1&id="+this.categories.tolib[this.previewindex].id+"&shareuser="+t,imageUrl:this.categories.tolib[this.previewindex].featured_base_media}}}};t.default=f},bf6c:function(e,t,a){"use strict";a.r(t);var n=a("3ed3"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a}}]);